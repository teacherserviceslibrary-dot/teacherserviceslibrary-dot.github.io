<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒ¹ Ù„ÙˆØ­Ø© Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø³Ù„ÙˆÙƒÙŠ ÙˆØ§Ù„ØªÙÙˆÙ‚</title>
  <div class="school-info">
  <p>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ø²Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ù…ØªÙˆØ³Ø·Ø© Ø¨ÙˆØ§Ø¯ÙŠ Ù…Ù†Ø§Ø®Ù€Ù„</p>
  <p>Ø§Ù„Ù…ÙˆØ¬Ù‡Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©: <strong>Ø¬Ù…ÙŠÙ„Ø© Ø§Ù„ÙÙŠÙÙŠ</strong></p>
  <p>Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: <strong>Ù†ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ</strong></p>
</div>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffe4f2;
      text-align: center;
      overflow-x: hidden;
    }
    h1 { margin-top: 20px; }

    .controls { margin: 20px; }
    .controls input, .controls button {
      margin: 5px; padding: 8px;
    }
    .school-info {
      background: #fff0fa;
      border: 2px solid #ffb6d9;
      padding: 10px;
      margin: 10px auto;
      width: fit-content;
      border-radius: 10px;
      font-size: 18px;
      line-height: 1.6;
    }
    .board {
      display: flex; justify-content: center; flex-wrap: wrap;
      gap: 15px; margin-top: 20px;
    }

    .column {
      background: linear-gradient(#fdfdfd, #ddd);
      border-radius: 8px; padding: 5px; width: 90px;
      display: flex; flex-direction: column-reverse;
      align-items: center; position: relative;
      cursor: pointer;
    }

    .circle {
      width: 40px; height: 40px; margin: 4px 0;
      border-radius: 50%; background: dodgerblue;
    }

    .student {
      position: absolute; bottom: 0; width: 40px;
      transition: bottom 0.5s;
    }

    .name { margin-top: 8px; font-weight: bold; }

    .actions { display: flex; gap: 5px; margin-top: 5px; }
    .actions button {
      border: none; background: none; cursor: pointer;
      font-size: 16px;
    }

    /* ğŸ‰ Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ø§Ø­ØªÙØ§Ù„ */
    .confetti {
      position: fixed; width: 10px; height: 10px; top: -10px;
      animation: fall 3s linear forwards;
    }
    @keyframes fall {
      to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
  </style>
</head>
<body>

  <h1>ğŸŒ¹ Ù„ÙˆØ­Ø© Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø³Ù„ÙˆÙƒÙŠ ğŸŒ¹</h1>

  <div class="controls">
    <input type="text" id="studentName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©">
    <button onclick="addStudent()">â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø©</button>
    <button onclick="resetProgress()">ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„ÙƒÙ„</button>
  </div>

  <div class="board" id="board"></div>

  <!-- ğŸ”Š ØµÙˆØª ØªØ´Ø¬ÙŠØ¹ -->
  <audio id="cheerSound" src="https://www.soundjay.com/human/applause-8.mp3"></audio>

  <script>
    let students = JSON.parse(localStorage.getItem("studentsData")) || [
      { name: "Ù‡Ø¯Ù‰", levels: 5 },
      { name: "Ø´Ø°Ù‰", levels: 5 },
      { name: "Ø¹ÙØ§Ù", levels: 5 }
    ];
    let progress = JSON.parse(localStorage.getItem("studentProgress")) || {};
    const board = document.getElementById("board");

    function renderBoard() {
      board.innerHTML = "";
      students.forEach((student, index) => {
        const col = document.createElement("div");
        col.classList.add("column");
        col.dataset.index = index;

        // ğŸŒ¹ ØµÙˆØ±Ø© ÙˆØ±Ø¯Ø© Ø¨Ø¯Ù„ Ø§Ù„Ø¨Ù†Øª
        const img = document.createElement("img");
        img.src = "https://cdn-icons-png.flaticon.com/512/201/201822.png";
        img.classList.add("student");

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
        for (let i = 0; i < student.levels; i++) {
          const circle = document.createElement("div");
          circle.classList.add("circle");
          col.appendChild(circle);
        }

        // Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©
        const name = document.createElement("div");
        name.classList.add("name");
        name.textContent = student.name;
        col.appendChild(name);

        // Ø£Ø²Ø±Ø§Ø± ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù (Ø®Ø§Ø±Ø¬ Ø­Ø¯Ø« Ø§Ù„Ø¹Ù…ÙˆØ¯)
        const actions = document.createElement("div");
        actions.classList.add("actions");

        const editBtn = document.createElement("button");
        editBtn.textContent = "âœï¸";
        editBtn.onclick = (e) => { e.stopPropagation(); editStudent(index); };

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "ğŸ—‘ï¸";
        deleteBtn.onclick = (e) => { e.stopPropagation(); deleteStudent(index); };

        actions.appendChild(editBtn);
        actions.appendChild(deleteBtn);
        col.appendChild(actions);

        col.appendChild(img);
        board.appendChild(col);

        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù…
        let level = progress[student.name] || 0;
        img.style.bottom = `${level * 48}px`;
        col.dataset.level = level;
      });
      bindEvents();
    }

    function bindEvents() {
      document.querySelectorAll(".column").forEach(col => {
        col.addEventListener("click", (e) => {
          if (e.target.tagName === "BUTTON") return; // âœ… ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
          const index = col.dataset.index;
          const student = students[index];
          const img = col.querySelector(".student");
          let level = parseInt(col.dataset.level);
          const maxLevels = student.levels;

          if (level < maxLevels - 1) {
            level++;
            col.dataset.level = level;
            img.style.bottom = `${level * 48}px`;
            progress[student.name] = level;
            saveData();

            if (level === maxLevels - 1) celebrate(student.name);
          }
        });
      });
    }

    // â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø© (5 Ù…Ø³ØªÙˆÙŠØ§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§)
    function addStudent() {
      const name = document.getElementById("studentName").value.trim();
      if (name) {
        students.push({ name, levels: 5 });
        saveData();
        renderBoard();
        document.getElementById("studentName").value = "";
      }
    }

    // âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©
    function editStudent(index) {
      const newName = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø·Ø§Ù„Ø¨Ø©:", students[index].name);
      if (newName) {
        const oldName = students[index].name;
        students[index].name = newName;
        progress[newName] = progress[oldName] || 0;
        delete progress[oldName];
        saveData();
        renderBoard();
      }
    }

    // ğŸ—‘ï¸ Ø­Ø°Ù Ø·Ø§Ù„Ø¨Ø©
    function deleteStudent(index) {
      if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ${students[index].name}ØŸ`)) {
        delete progress[students[index].name];
        students.splice(index, 1);
        saveData();
        renderBoard();
      }
    }

    // ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„ÙƒÙ„
    function resetProgress() {
      progress = {};
      localStorage.setItem("studentProgress", JSON.stringify(progress));
      renderBoard();
    }

    // ğŸ‰ Ø§Ø­ØªÙØ§Ù„
    function celebrate(name) {
      document.getElementById("cheerSound").play();
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random() * window.innerWidth + "px";
        confetti.style.backgroundColor = ["gold","red","blue","green","purple"][Math.floor(Math.random()*5)];
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3000);
      }
      alert(`ğŸŒ¹ Ù…Ø¨Ø±ÙˆÙƒ Ù„Ù„Ø·Ø§Ù„Ø¨Ø© ${name} ÙˆØµÙ„Øª Ù„Ø£Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø©!`);
    }

    function saveData() {
      localStorage.setItem("studentsData", JSON.stringify(students));
      localStorage.setItem("studentProgress", JSON.stringify(progress));
    }

    renderBoard();
  </script>
</body>
</html>
